{"hash":"5c2e1e4a43e10bc2b04ea9ab84249aee5c7dfa01","data":{"post":{"title":"내 Gridsome 한국어 url 문제 해결 방식","path":"/%EB%82%B4-gridsome-%ED%95%9C%EA%B5%AD%EC%96%B4-url-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%8B%9D/","date":"2022.04.13","timeToRead":1,"tags":[{"id":"programming","title":"programming","path":"/tag/programming/"},{"id":"korean","title":"korean","path":"/tag/korean/"},{"id":"gridsome","title":"gridsome","path":"/tag/gridsome/"},{"id":"regex","title":"regex","path":"/tag/regex/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"description":"Gridsome에서 한국어 url의 slug 에러 해결 방법은 gridsome.config.js에서 templete의 path에 함수를 넣으면 된다.","content":"<h1 id=\"내-gridsome-한국어-url-문제-해결-방식\"><a href=\"#%EB%82%B4-gridsome-%ED%95%9C%EA%B5%AD%EC%96%B4-url-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%8B%9D\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>내 Gridsome 한국어 url 문제 해결 방식</h1>\n<p>Gridsome에는 url를 만들 때 slugify를 사용한다.\n문제는 한국어가 포함이 안 되어 있어서 slugify를 통과하면 한국어가 사라지고 영문,숫자만 남는다.\n그래서 url중복이나 에러가 뜨는데 slugify 모듈을 고칠 수도 없고, 좀 귀찮은 문제이다.\n이 경우에는 흥미롭게도 공식문서에 해결책이 있었다.<br>\n<a href=\"https://gridsome.org/docs/templates/#setup-templates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gridsome.org/docs/templates/#setup-templates</a><br>\n공식 문서를 보면 path에 함수를 넣을 수 있게 나와있다.\n나는 이걸 이용해서 정규식으로 한국어 아닌 것만 찾아서 slugify를 통과시키는 함수를 썼다.</p>\n<p>gridsome.config.js</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> slugify <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@sindresorhus/slugify'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">slugI18N</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> nonKorean <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\"><span class=\"token char-class\"><span class=\"token char-class-punctuation punctuation\">[</span><span class=\"token char-class-negation operator\">^</span><span class=\"token range\">ㄱ<span class=\"token range-punctuation operator\">-</span>ㅎ</span>|<span class=\"token range\">ㅏ<span class=\"token range-punctuation operator\">-</span>ㅣ</span>|<span class=\"token range\">가<span class=\"token range-punctuation operator\">-</span>힣</span><span class=\"token char-class-punctuation punctuation\">]</span></span><span class=\"token quantifier number\">+</span></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> slugResult <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">replaceAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">,</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">split</span><span class=\"token punctuation\">(</span>nonKorean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  slugResult <span class=\"token operator\">=</span> slugResult<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token arrow operator\">=></span><span class=\"token punctuation\">{</span> <span class=\"token keyword control-flow\">return</span> nonKorean<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token function\">slugify</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span><span class=\"token function\">encodeURI</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">return</span> slugResult\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token property-access\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token spread operator\">...</span>\n     <span class=\"token literal-property property\">templates</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">Post</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">path</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span><span class=\"token punctuation\">)</span><span class=\"token arrow operator\">=></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">slugI18N</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span><span class=\"token property-access\">title</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token spread operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>이런 식으로 바꾸면 한글은 그대로 놔두고 다른 부분은 원래대로 slug화 한다.</p>\n"}},"context":{}}